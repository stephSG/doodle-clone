import{u as k,o as y,a as n,c as a,b as e,d as _,w as p,e as d,f as M,v as j,t as o,F as C,r as B,g as S,h as x,i as V,j as h}from"./index-BzyAT-xv.js";import{u as z}from"./polls-DhwkvhO5.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"min-h-screen"},H={class:"bg-gradient-to-r from-primary/10 to-primary/5 py-16 px-4"},A={class:"max-w-4xl mx-auto"},L={class:"flex justify-between items-center mb-8"},N={class:"relative"},P={class:"max-w-4xl mx-auto px-4 py-8"},R={key:0,class:"flex justify-center py-20"},$={key:1,class:"space-y-6"},E={class:"flex justify-between items-center"},F={class:"text-xl font-bold"},I={class:"text-sm text-base-content/50"},Q={key:0,class:"text-center py-20"},U={class:"text-xl font-bold mb-2"},q={class:"text-base-content/50 mb-6"},G={key:1,class:"space-y-4"},J={class:"card bg-base-100 shadow-lg hover:shadow-xl transition-all duration-300 border border-base-200 hover:border-primary/30 overflow-hidden"},K={class:"card-body p-0"},O={class:"p-6"},W={class:"flex items-start justify-between gap-4"},X={class:"flex-1 min-w-0"},Y={class:"card-title text-lg group-hover:text-primary transition-colors truncate"},Z={key:0,class:"text-base-content/60 text-sm mt-1 line-clamp-2"},ee={class:"flex flex-wrap gap-3 mt-3"},te={key:0,class:"inline-flex items-center gap-1 text-xs text-base-content/60"},se={class:"inline-flex items-center gap-1 text-xs text-base-content/60"},oe={key:1,class:"badge badge-success badge-sm gap-1"},ne={class:"text-center min-w-16"},ae={class:"text-2xl font-bold text-primary"},re={class:"bg-base-50 px-6 py-3 border-t border-base-200"},le={class:"flex justify-between items-center text-xs text-base-content/50"},ie={__name:"HomeView",setup(de){k();const b=z(),i=x([]),u=x(!1),r=x("");let v=null;async function m(){u.value=!0;try{const l=await b.fetchPolls(r.value?{search:r.value}:{});i.value=l.polls||[]}catch(l){console.error("Error loading polls:",l)}finally{u.value=!1}}function g(){clearTimeout(v),v=setTimeout(()=>{m()},300)}function w(l){const t=new Date(l),s=Math.floor((new Date-t)/1e3);return s<60?"à l'instant":s<3600?`il y a ${Math.floor(s/60)} min`:s<86400?`il y a ${Math.floor(s/3600)} h`:s<604800?`il y a ${Math.floor(s/86400)} j`:t.toLocaleDateString("fr-FR")}return y(()=>{m()}),(l,t)=>{const c=S("router-link");return n(),a("div",T,[e("div",H,[e("div",A,[e("div",L,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-4xl md:text-5xl font-black mb-2"},"Sondages"),e("p",{class:"text-base-content/70"},"Planifiez vos événements facilement")],-1)),_(c,{to:"/create",class:"btn btn-primary btn-lg gap-2 shadow-xl"},{default:p(()=>[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),d(" Créer ",-1)])]),_:1})]),e("div",N,[t[3]||(t[3]=e("svg",{class:"w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),M(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onInput:g,placeholder:"Rechercher un sondage...",class:"input input-bordered w-full pl-12 h-14 text-lg shadow-sm"},null,544),[[j,r.value]])])])]),e("div",P,[u.value?(n(),a("div",R,[...t[4]||(t[4]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):(n(),a("div",$,[e("div",E,[e("h2",F,o(r.value?"Résultats":"Sondages récents"),1),e("span",I,o(i.value.length)+" sondage"+o(i.value.length>1?"s":""),1)]),i.value.length===0?(n(),a("div",Q,[t[6]||(t[6]=e("div",{class:"inline-block p-6 bg-base-200 rounded-full mb-6"},[e("svg",{class:"w-16 h-16 text-base-content/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})])],-1)),e("h3",U,o(r.value?"Aucun résultat":"Aucun sondage"),1),e("p",q,o(r.value?"Essayez d autres termes de recherche":"Créez votre premier sondage pour commencer"),1),_(c,{to:"/create",class:"btn btn-primary gap-2"},{default:p(()=>[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),d(" Créer un sondage ",-1)])]),_:1})])):(n(),a("div",G,[(n(!0),a(C,null,B(i.value,s=>(n(),V(c,{key:s.id,to:`/poll/${s.id}`,class:"block group"},{default:p(()=>{var f;return[e("div",J,[e("div",K,[e("div",O,[e("div",W,[e("div",X,[e("h3",Y,o(s.title),1),s.description?(n(),a("p",Z,o(s.description),1)):h("",!0),e("div",ee,[s.location?(n(),a("span",te,[t[7]||(t[7]=e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})],-1)),d(" "+o(s.location),1)])):h("",!0),e("span",se,[t[8]||(t[8]=e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),d(" "+o(((f=s.creator)==null?void 0:f.name)||"Anonyme"),1)]),s.final_date?(n(),a("span",oe,[...t[9]||(t[9]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1),d(" Date fixée ",-1)])])):h("",!0)])]),e("div",ne,[e("div",ae,o(s.participant_count||0),1),t[10]||(t[10]=e("div",{class:"text-[10px] uppercase text-base-content/40 font-bold"},"participants",-1))])])]),e("div",re,[e("div",le,[e("span",null,"Créé "+o(w(s.created_at)),1),t[11]||(t[11]=e("svg",{class:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])])]}),_:2},1032,["to"]))),128))]))]))])])}}},xe=D(ie,[["__scopeId","data-v-6e39b885"]]);export{xe as default};
