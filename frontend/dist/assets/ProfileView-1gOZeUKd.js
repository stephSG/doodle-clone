import{l as N,m as U,o as D,a as u,c,b as e,y as i,t as m,p as k,e as v,v as w,g as f,f as S,h as y,u as F}from"./index-CwG20VuD.js";const B={class:"max-w-2xl mx-auto space-y-6"},E={class:"card bg-base-100 shadow-xl"},M={class:"card-body"},T={class:"flex items-center gap-4 mb-6"},q={class:"avatar"},O={class:"w-24 rounded-full"},R=["src"],Z={class:"text-2xl font-bold"},$={class:"text-base-content/70"},j={class:"badge badge-ghost mt-1"},z={class:"form-control"},G={class:"form-control"},H=["disabled"],I={key:0,class:"loading loading-spinner"},J={key:0,class:"card bg-base-100 shadow-xl"},K={class:"card-body"},L={class:"form-control"},Q={class:"form-control"},W={key:0,class:"alert alert-error"},X=["disabled"],Y={key:0,class:"loading loading-spinner"},ae={__name:"ProfileView",setup(ee){F();const a=N(),p=U(),o=y(!1),b=y(""),l=y({name:"",email:""}),r=y({old_password:"",new_password:""});D(()=>{var t,s;l.value={name:((t=a.user)==null?void 0:t.name)||"",email:((s=a.user)==null?void 0:s.email)||""}});async function V(){var t,s;o.value=!0;try{await a.updateProfile(l.value.name,l.value.email),p.success("Profile updated successfully!")}catch(d){p.error(((s=(t=d.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to update profile")}finally{o.value=!1}}async function C(){var t,s;o.value=!0,b.value="";try{await a.changePassword(r.value.old_password,r.value.new_password),p.success("Password changed successfully!"),r.value={old_password:"",new_password:""}}catch(d){b.value=((s=(t=d.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to change password"}finally{o.value=!1}}function A(){confirm("Are you sure you want to delete your account? This action cannot be undone.")&&p.info("Account deletion will be implemented soon")}return(t,s)=>{var d,_,g,x,h,P;return u(),c("div",B,[s[13]||(s[13]=e("h1",{class:"text-3xl font-bold"},"Profile",-1)),e("div",E,[e("div",M,[e("div",T,[e("div",q,[e("div",O,[e("img",{src:((d=i(a).user)==null?void 0:d.avatar)||`https://api.dicebear.com/7.x/avataaars/svg?seed=${(_=i(a).user)==null?void 0:_.name}`},null,8,R)])]),e("div",null,[e("h2",Z,m((g=i(a).user)==null?void 0:g.name),1),e("p",$,m((x=i(a).user)==null?void 0:x.email),1),e("div",j,m(((h=i(a).user)==null?void 0:h.provider)||"email"),1)])]),e("form",{onSubmit:k(V,["prevent"]),class:"space-y-4"},[e("div",z,[s[4]||(s[4]=e("label",{class:"label"},[e("span",{class:"label-text"},"Name")],-1)),v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>l.value.name=n),type:"text",class:"input input-bordered"},null,512),[[w,l.value.name]])]),e("div",G,[s[5]||(s[5]=e("label",{class:"label"},[e("span",{class:"label-text"},"Email")],-1)),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>l.value.email=n),type:"email",class:"input input-bordered"},null,512),[[w,l.value.email]])]),e("button",{type:"submit",class:"btn btn-primary",disabled:o.value},[o.value?(u(),c("span",I)):f("",!0),s[6]||(s[6]=S(" Save Changes ",-1))],8,H)],32)])]),((P=i(a).user)==null?void 0:P.provider)==="email"?(u(),c("div",J,[e("div",K,[s[10]||(s[10]=e("h2",{class:"card-title"},"Change Password",-1)),e("form",{onSubmit:k(C,["prevent"]),class:"space-y-4"},[e("div",L,[s[7]||(s[7]=e("label",{class:"label"},[e("span",{class:"label-text"},"Current Password")],-1)),v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>r.value.old_password=n),type:"password",class:"input input-bordered",required:""},null,512),[[w,r.value.old_password]])]),e("div",Q,[s[8]||(s[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"New Password")],-1)),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>r.value.new_password=n),type:"password",class:"input input-bordered",minlength:"8",required:""},null,512),[[w,r.value.new_password]])]),b.value?(u(),c("div",W,[e("span",null,m(b.value),1)])):f("",!0),e("button",{type:"submit",class:"btn btn-warning",disabled:o.value},[o.value?(u(),c("span",Y)):f("",!0),s[9]||(s[9]=S(" Change Password ",-1))],8,X)],32)])])):f("",!0),e("div",{class:"card bg-base-100 shadow-xl border border-error/20"},[e("div",{class:"card-body"},[s[11]||(s[11]=e("h2",{class:"card-title text-error"},"Danger Zone",-1)),s[12]||(s[12]=e("p",{class:"text-sm text-base-content/70"},"Once you delete your account, there is no going back. Please be certain.",-1)),e("button",{onClick:A,class:"btn btn-error btn-outline"}," Delete Account ")])])])}}};export{ae as default};
